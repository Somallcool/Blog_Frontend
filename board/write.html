<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>새 글 작성</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f4f7f6; }
        .markdown-preview {
            border: 1px solid #e5e7eb;
            min-height: 200px;
            padding: 1rem;
            background-color: #ffffff;
            border-radius: 0.5rem;
            box-shadow: inset 0 1px 3px 0 rgba(0, 0, 0, 0.07);
        }
        /* 마크다운 렌더링 스타일 (preview-mode 전용) */
        .markdown-preview h1 { font-size: 1.5em; font-weight: bold; border-bottom: 1px solid #ccc; margin-top: 1em; padding-bottom: 0.3em; }
        .markdown-preview p { margin-bottom: 1em; line-height: 1.6; }
        .markdown-preview pre { background-color: #f0f4f8; padding: 0.75rem; border-radius: 4px; overflow-x: auto; }
        .markdown-preview code { background-color: #e2e8f0; padding: 2px 4px; border-radius: 4px; font-size: 0.9em; }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8">

    <div class="max-w-6xl mx-auto bg-white shadow-2xl rounded-xl p-6 md:p-10">

        <h1 class="text-3xl md:text-4xl font-extrabold text-gray-800 mb-8 border-b pb-4">새 게시글 작성</h1>

        <!-- status 메시지 영역 (백엔드 연결 확인용) -->
        <p id="status" class="mb-4 text-sm font-medium text-green-600"></p>

        <!-- 게시글 작성 폼 -->
        <form id="board-write-form" enctype="multipart/form-data">

            <!-- 제목 -->
            <div class="mb-5">
                <label for="title" class="block text-sm font-medium text-gray-700 mb-2">제목</label>
                <input type="text" id="title" name="title" required
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 shadow-sm"
                       placeholder="제목을 입력하세요">
            </div>

            <!-- 작성자 (닉네임) -->
            <div class="mb-5">
                <label for="author" class="block text-sm font-medium text-gray-700 mb-2">작성자 (닉네임)</label>
                <input type="text" id="author" name="author" required
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 shadow-sm"
                       placeholder="닉네임을 입력하세요">
            </div>
            
            <!-- 💡 새로 추가된 카테고리 선택 필드 -->
            <div class="mb-5">
                <label for="category" class="block text-sm font-medium text-gray-700 mb-2">카테고리</label>
                <select id="category" name="category" required
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 shadow-sm bg-white">
                    <option value="" disabled selected>카테고리를 선택하세요</option>
                    <option value="notice">공지사항</option>
                    <option value="free">자유 게시판</option>
                    <option value="question">질문/답변</option>
                    <option value="etc">기타</option>
                </select>
            </div>

            <!-- 내용 (마크다운) -->
            <div class="mb-5">
                <label for="content" class="block text-sm font-medium text-gray-700 mb-2">내용 (마크다운)</label>
                <textarea id="content" name="content" rows="10" required
                          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 shadow-sm"
                          placeholder="마크다운 문법으로 내용을 작성하세요."></textarea>
            </div>
            
            <!-- 파일 첨부 -->
            <div class="mb-5">
                <label for="img" class="block text-sm font-medium text-gray-700 mb-2">파일 첨부 (선택 사항)</label>
                <input type="file" id="img" name="img" accept="image/*"
                       class="w-full file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100">
            </div>

            <!-- 마크다운 미리보기 -->
            <h2 class="text-xl font-bold text-gray-800 my-4 border-t pt-4">미리보기</h2>
            <div id="markdown-preview" class="markdown-preview">
                <p class="text-gray-400 italic">여기에 마크다운 미리보기가 표시됩니다.</p>
            </div>


            <!-- 버튼 그룹 -->
            <div class="mt-8 flex justify-end space-x-4">
                <button type="button" onclick="window.history.back();" 
                        class="px-6 py-3 bg-gray-500 text-white font-bold rounded-lg hover:bg-gray-600 transition duration-150 shadow-md">
                    취소
                </button>
                <button type="submit" 
                        class="px-6 py-3 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition duration-150 shadow-xl">
                    게시글 작성
                </button>
            </div>
        </form>
    </div>

    <!-- 스크립트 모듈 로드 -->
    <script type="module" src="../app.js"></script>
    <script type="module" src="/board/write.js"></script>
</body>
</html>
